!function(s){"use strict";var o=function(t){var c=t%10;return 5<t&&t<21||0===c||5<=c&&c<=9?"месяцев":1===c?"месяц":"месяца"},u=function(t){return 1===t%10&&11!==t?"месяца":"месяцев"};s(document).ready(function(t){var c,a,e,l,n,r,i,_;c=+creditCalc.term_start,a=+creditCalc.amount_start,e=c+" "+o(c),l=+creditCalc.rate/100,n=Math.round((a+a*l*c)/c),r="От&nbsp;"+creditCalc.term_min+" "+u(+creditCalc.term_min),i="до&nbsp;"+creditCalc.term_max+" "+u(+creditCalc.term_max),_=creditCalc.currency,s(".cc__input-amount").val(a.toLocaleString("ru-RU")+" "+_),s(".cc__input-term").val(e),s(".cc__result-value").html(n.toLocaleString("ru-RU")+" "+_),s(".cc__hint-part_min").html(r),s(".cc__hint-part_max").html(i),s(".cc__range-amount").slider({range:"min",step:+creditCalc.step,min:+creditCalc.amount_min,max:+creditCalc.amount_max,value:+creditCalc.amount_start,slide:function(t,c){var a=s(".cc__range-term").slider("value"),e=c.value,l=+creditCalc.rate/100,n=Math.round((e+e*l*a)/a);s(".cc__input-amount").val(e.toLocaleString("ru-RU")+" "+_),s(".cc__result-value").html(n.toLocaleString("ru-RU")+" "+_)}}),s(".cc__range-term").slider({range:"min",max:+creditCalc.term_max,min:+creditCalc.term_min,value:+creditCalc.term_start,slide:function(t,c){var a=s(".cc__range-amount").slider("value"),e=c.value,l=+creditCalc.rate/100,n=Math.round((a+a*l*e)/e);s(".cc__input-term").val(e+" "+o(e)),s(".cc__result-value").html(n.toLocaleString("ru-RU")+" "+_)}}),s(".cc__input_phone").each(function(){s(this).inputmask({mask:"+7 (999) 999-99-99"})}),s(".cc__input").focus(function(){""===s(this).val()&&s(this).next().addClass("cc__label_active")}).blur(function(){""===s(this).val()&&s(this).next().removeClass("cc__label_active")}).each(function(){""!==s(this).val()&&s(this).next().addClass("cc__label_active")}),s(".cc__form").submit(function(t){t.preventDefault();var c="&payment="+s(".cc__result-value").text()+"&action=credit_calc";s.ajax({url:creditCalc.ajaxUrl,type:"post",data:s(this).serialize()+c,dataType:"json",beforeSend:function(){s(".cc__status").html(""),s(".cc__btn").prop("disabled",!0).addClass("cc__btn_disabled"),s(".cc__btn-icon").removeClass("ld-arrow ld-complete").addClass("ld-spin")},success:function(t){setTimeout(function(){3===t?s(".cc__status").html("Ошибка отправки!").css({color:"#ff1a29"}):1===t?(s(".cc__status").html("Ваша заявка отправлена!").css({color:"#1d2029"}),s('.cc__input[name="name"], .cc__input[name="phone"]').val(""),s(".cc__label-clear").removeClass("cc__label_active")):2===t?s(".cc__status").html("Ошибка проверки данных!").css({color:"#ff1a29"}):(s(".cc__status").html("Не распознанная ошибка").css({color:"#ff1a29"}),console.log(t))},1e3)},error:function(){s(".cc__status").html("Ошибка, попробуйте еще раз!").css({color:"#ff1a29"})},complete:function(t){console.log(t),setTimeout(function(){s(".cc__btn-icon").removeClass("ld-spin").addClass("ld-complete"),s(".cc__btn").prop("disabled",!1).removeClass("cc__btn_disabled")},1e3)}})}),s(".popup__close, .overlay").click(function(t){t.preventDefault(),s(".popup").fadeOut(),s("body").removeClass("modal-open"),s(".overlay").fadeOut()})})}(jQuery);